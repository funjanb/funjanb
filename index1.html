<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ▼▼▼ SEO対策エリア ▼▼▼ -->
    <title>ふんじゃんのB級でいこうぜ！全国道の駅動画マップ</title>
    <meta
      name="description"
      content="全国47都道府県の「道の駅」をYouTube動画で紹介するマップサイト。"
    />
    <meta
      property="og:image"
      content="https://funjanb.github.io/funjanb/img/top1.jpg"
    />
    <!-- ▲▲▲ SEO対策エリア終了 ▲▲▲ -->

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* スムーズスクロール設定 */
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: "Noto Sans JP", sans-serif;
        background-color: #f9fafb;
        color: #333;
      }
      .content-width {
        width: 100%;
        max-width: 850px;
        margin: 0 auto;
      }
      /* スクロール位置の微調整 */
      section {
        scroll-margin-top: 20px;
      }
      .top-image {
        width: 100%;
        height: auto;
        display: block;
      }
      .main-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 1rem;
        border-left: 6px solid #fcd34d;
        padding-left: 1rem;
        width: 100%;
        text-align: left;
      }
      .region-header {
        font-size: 1.8rem;
        font-weight: 800;
        color: #fff;
        background-color: #374151;
        padding: 0.8rem;
        width: 100%;
        text-align: center;
        margin-top: 3rem;
        border-radius: 0.5rem;
      }
      /* 地図コンテナ */
      .map-container {
        position: relative;
        width: 100%;
        aspect-ratio: 4 / 3;
        border: 2px solid #e5e7eb;
        background-color: #eee;
        margin-bottom: 0.5rem;
      }
      .map-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
        background-color: #fff;
      }
      /* ピン配置 */
      .pin-wrapper {
        position: absolute;
        transform: translate(-50%, -100%);
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: center;
        pointer-events: none;
      }
      .pin-link {
        pointer-events: auto;
        cursor: pointer;
        display: block;
      }
      .pin-icon {
        color: #dc2626;
        font-size: 1.4rem;
        animation: bounce 2s infinite;
        text-shadow: 0 0 3px #fff;
      }
      .pin-label {
        font-size: 0.7rem;
        font-weight: bold;
        white-space: nowrap;
        text-shadow: 1px 1px 0 #fff, -1px 1px 0 #fff, 1px -1px 0 #fff,
          -1px -1px 0 #fff;
        color: #333;
        pointer-events: none;
      }
      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-8px);
        }
        60% {
          transform: translateY(-4px);
        }
      }
      /* 移動・ナビゲーションボタン */
      .nav-btn {
        @apply bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow text-xs transition-all flex items-center gap-1;
      }
      /* 地域ジャンプカード */
      .jump-card {
        @apply bg-white hover:bg-yellow-50 text-gray-900 border-2 border-gray-200 rounded-xl m-1.5 shadow-sm transition-all flex flex-col items-center justify-center text-center p-3;
        cursor: pointer;
        width: calc(25% - 0.75rem);
        min-width: 100px;
      }
      .jump-card .region-name {
        @apply font-bold text-sm text-gray-800 mb-1 flex items-center gap-1;
      }
      .jump-card .station-count {
        @apply text-xs font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full;
      }
      .jump-card:hover {
        @apply border-yellow-400 shadow-md transform -translate-y-1;
      }

      /* 待機中（メモリ済み）状態のスタイル */
      /* 背景色やボーダーの変更は削除し、文字色のみを変更 */
      .jump-card.pending .region-name {
        color: #ca8a04 !important; /* 文字色を濃い黄色に固定 (text-yellow-600相当) */
      }

      /* アイコンも文字色に合わせる */
      .jump-card.pending .region-name i {
        color: #ca8a04 !important;
      }

      @media (max-width: 640px) {
        .pin-icon {
          font-size: 1rem;
        }
        .pin-label {
          font-size: 0.5rem;
        }
        .jump-card {
          width: calc(33.33% - 0.75rem);
          @apply p-2;
        }
        .jump-card .region-name {
          @apply text-xs;
        }
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col items-center">
    <header class="content-width text-center pt-4" id="pageTop">
      <img
        src="https://funjanb.github.io/funjanb/img/top1.jpg"
        alt="メインビジュアル"
        class="top-image"
      />

      <div class="mt-4">
        <p class="font-bold text-gray-700 text-lg">
          全国の激アツな「道の駅-休憩(車中泊)スポット」を地図から探そう！
        </p>
        <p class="text-gray-500 font-medium mt-1">
          ピンをタップしてYouTube動画をチェック。
        </p>
      </div>

      <!-- 地域ナビゲーション -->
      <div class="mt-8 px-4 w-full">
        <!-- 装飾用の枠線を追加 -->
        <div class="border-2 border-gray-300 rounded-xl p-4 bg-white shadow-sm">
          <p
            class="text-xs font-bold text-gray-400 mb-4 flex items-center justify-center gap-1"
          >
            全国制覇に向けて更新中！ <br />20251226 三重県追加
          </p>
          <!-- カードレイアウトのコンテナ -->
          <div
            id="regionNavContainer"
            class="flex flex-wrap justify-center gap-1 content-width"
          >
            <!-- ここにJavaScriptでカードが生成されます -->
          </div>
        </div>
      </div>
    </header>

    <main class="content-width px-2 mt-8">
      <div id="mainContent"></div>
    </main>

    <footer class="w-full bg-gray-200 text-white text-center py-10 mt-20">
      <div class="content-width">
        <a
          href="https://www.youtube.com/@%E3%81%B5%E3%82%93%E3%81%98%E3%82%83%E3%82%93%E3%81%AEB%E7%B4%9A%E3%81%A7%E3%81%84%E3%81%93%E3%81%86%E3%81%9C"
          target="_blank"
          rel="noopener noreferrer"
          class="text-red-400 hover:text-red-300 text-xl font-bold flex flex-col items-center gap-2"
        >
          <img
            src="https://funjanb.github.io/funjanb/img/top1.jpg"
            class="w-32 rounded shadow"
            alt="YouTube Logo"
          />
          <span>YouTubeチャンネル登録をお願いします</span>
        </a>
        <p class="mt-6 text-xs text-gray-700">
          &copy; ふんじゃんのB級でいこうぜ！ All Rights Reserved.
        </p>
      </div>
    </footer>

    <script>
      const baseUrl = "https://funjanb.github.io/funjanb/img/";

      // 読み込み待ちのジャンプ先を管理する変数
      let pendingTargetId = null;
      let pendingNavButton = null;

      const regions = [
        // {
        //   id: "hokkaido",
        //   name: "北海道",
        //   prefs: [{ name: "北海道", file: "hokaido-hokaido.jpg" }],
        // },
        // {
        //   id: "tohoku",
        //   name: "東北",
        //   prefs: [
        //     { name: "青森県", file: "tohoku-aomori.jpg" },
        //     { name: "岩手県", file: "tohoku-iwate.jpg" },
        //     { name: "宮城県", file: "tohoku-miyagi.jpg" },
        //     { name: "秋田県", file: "tohoku-akita.jpg" },
        //     { name: "山形県", file: "tohoku-yamagata.jpg" },
        //     { name: "福島県", file: "tohoku-fukusima.jpg" },
        //   ],
        // },
        // {
        //   id: "kanto",
        //   name: "関東",
        //   prefs: [
        //     { name: "茨城県", file: "kanto-ibaraki.jpg" },
        //     { name: "栃木県", file: "kanto-tochigi.jpg" },
        //     { name: "群馬県", file: "kanto-gunma.jpg" },
        //     { name: "埼玉県", file: "kanto-saitama.jpg" },
        //     { name: "千葉県", file: "kanto-chiba.jpg" },
        //     { name: "東京都", file: "kanto-tokyo.jpg" },
        //     { name: "神奈川県", file: "kanto-kanagawa.jpg" },
        //   ],
        // },
        // {
        //   id: "chubu",
        //   name: "中部",
        //   prefs: [
        //     { name: "新潟県", file: "tyubu-nigata.jpg" },
        //     { name: "富山県", file: "tyubu-toyama.jpg" },
        //     { name: "石川県", file: "tyubu-ishikawa.jpg" },
        //     { name: "福井県", file: "tyubu-fukui.jpg" },
        //     { name: "山梨県", file: "tyubu-yamagata.jpg" },
        //     { name: "長野県", file: "tyubu-nagano.jpg" },
        //     { name: "岐阜県", file: "tyubu-gifu.jpg" },
        //     { name: "静岡県", file: "tyubu-shizuoka.jpg" },
        //     { name: "愛知県", file: "tyubu-aichi.jpg" },
        //   ],
        // },
        {
          id: "kinki",
          name: "近畿",
          prefs: [
            { name: "三重県", file: "kinki-mie.jpg" },
            // { name: "滋賀県", file: "kinki-shiga.jpg" },
            { name: "京都府", file: "kinki-kyoto.jpg" },
            { name: "大阪府", file: "kinki-osaka.jpg" },
            // { name: "兵庫県", file: "kinki-hyogo.jpg" },
            { name: "奈良県", file: "kinki-nara.jpg" },
            // { name: "和歌山県", file: "kinki-wakayama.jpg" },
          ],
        },
        // {
        //   id: "chugoku",
        //   name: "中国",
        //   prefs: [
        //     { name: "鳥取県", file: "tyugoku-totori.jpg" },
        //     { name: "島根県", file: "tyugoku-shimane.jpg" },
        //     { name: "岡山県", file: "tyugoku-okayama.jpg" },
        //     { name: "広島県", file: "tyugoku-hirochima.jpg" },
        //     { name: "山口県", file: "tyugoku-yamaguchi.jpg" },
        //   ],
        // },
        // {
        //   id: "shikoku",
        //   name: "四国",
        //   prefs: [
        //     { name: "徳島県", file: "shikoku-tokushima.jpg" },
        //     { name: "香川県", file: "shikoku-kagawa.jpg" },
        //     { name: "愛媛県", file: "shikoku-ehime.jpg" },
        //     { name: "高知県", file: "shikoku-kochi.jpg" },
        //   ],
        // },
        // {
        //   id: "kyushu",
        //   name: "九州・沖縄",
        //   prefs: [
        //     { name: "福岡県", file: "kyusyu-fukuoka.jpg" },
        //     { name: "佐賀県", file: "kyusyu-saga.jpg" },
        //     { name: "長崎県", file: "kyusyu-nagashima.jpg" },
        //     { name: "熊本県", file: "kyusyu-kumamoto.jpg" },
        //     { name: "大分県", file: "kyusyu-oita.jpg" },
        //     { name: "宮崎県", file: "kyusyu-miyazaki.jpg" },
        //     { name: "鹿児島県", file: "kyusyu-kagoshima.jpg" },
        //     { name: "沖縄県", file: "kyusyu-okunawa.jpg" },
        //   ],
        // },
      ];

      const allStationData = {
        "kinki-osaka.jpg": [
          {
            name: "能勢（くりの郷）",
            address: "大阪府豊能郡能勢町平野535",
            url: "https://www.youtube.com/watch?v=8qm7EXimhcM",
            top: 21,
            left: 61,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "しらとりの郷<br>・羽曳野",
            address: "大阪府羽曳野市埴生野975-3",
            url: "https://www.youtube.com/watch?v=DAVgms1Z8Hc",
            top: 74,
            left: 66,
            labelDx: 0,
            labelDy: -8,
          },
          {
            name: "近つ飛鳥<br>の里太子",
            address: "大阪府南河内郡太子町大字山田2254-3",
            url: "https://www.youtube.com/watch?v=uKHyF_wxLAg",
            top: 78,
            left: 71,
            labelDx: 23,
            labelDy: 8,
          },
          {
            name: "かなん",
            address: "大阪府南河内郡河南町大字神山523-1",
            url: "https://www.youtube.com/watch?v=S6F7nlmAOfY",
            top: 82,
            left: 68,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "ちはやあかさか",
            address: "大阪府南河内郡千早赤阪村二河原辺7",
            url: "https://www.youtube.com/watch?v=zWmhIAqRoKM",
            top: 86,
            left: 67,
            labelDx: 4,
            labelDy: 35,
          },
          {
            name: "いずみ<br>山愛の里",
            address: "大阪府和泉市仏並町398-1",
            url: "https://www.youtube.com/watch?v=pkdyeFD5OBE",
            top: 82,
            left: 50.5,
            labelDx: -4,
            labelDy: 0,
          },
          {
            name: "奥河内<br>くろまろ<br>の郷",
            address: "大阪府河内長野市高向1218-1",
            url: "https://www.youtube.com/watch?v=FLPI4tDX4-w",
            top: 84.5,
            left: 60,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "愛彩<br>ランド",
            address: "大阪府岸和田市岸の丘町3-6-18",
            url: "https://www.youtube.com/watch?v=ePS6X1jwCh4",
            top: 84,
            left: 45.5,
            labelDx: -15,
            labelDy: 5,
          },
          {
            name: "みさき",
            address: "大阪府泉南郡岬町淡輪5654-3",
            url: "https://www.youtube.com/watch?v=K8a8Kfsqrak",
            top: 90,
            left: 17,
            labelDx: 15,
            labelDy: 1,
          },
          {
            name: "とっと<br>パーク小島",
            address: "大阪府泉南郡岬町多奈川小島455-1",
            url: "https://www.youtube.com/watch?v=mbChGyOsCwE",
            top: 90,
            left: 10,
            labelDx: -8,
            labelDy: 0,
          },
        ],
        "kinki-kyoto.jpg": [
          {
            name: "舟屋の里伊根",
            address: "京都府与謝郡伊根町字亀島459-1",
            url: "https://www.youtube.com/watch?v=V3z17KIGJDE",
            top: 15.5,
            left: 38,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "てんきてんき丹後",
            address: "京都府京丹後市丹後町竹野313-1",
            url: "https://www.youtube.com/watch?v=64nffnw29VQ",
            top: 11.0,
            left: 28,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "和",
            address: "京都府船井郡京丹波町大迫才ノ後30",
            url: "https://www.youtube.com/watch?v=MJ-1J-DZs9M",
            top: 52.0,
            left: 46.5,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "ガレリアかめおか",
            address: "京都府亀岡市余部町宝久保1-1",
            url: "https://www.youtube.com/watch?v=i5oit1qnMXI",
            top: 73.0,
            left: 58,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "丹波<br>マーケス",
            address: "京都府船井郡京丹波町須知色紙田3-5",
            url: "https://www.youtube.com/watch?v=aP6kYynyxLs",
            top: 61.0,
            left: 48,
            labelDx: 14,
            labelDy: 3,
          },
          {
            name: "瑞穂の里<br>・さらびき",
            address: "京都府船井郡京丹波町大朴焼尾39-1",
            url: "https://www.youtube.com/watch?v=PYsv8VLH7g4",
            top: 60.0,
            left: 41,
            labelDx: -35,
            labelDy: 10,
          },
          {
            name: "舞鶴港とれとれセンター",
            address: "京都府舞鶴市字下福井905",
            url: "https://www.youtube.com/watch?v=PMPFfCdx5Bg",
            top: 38.0,
            left: 40,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "京都新光悦村",
            address: "京都府南丹市園部町曽我谷一本木1-1",
            url: "https://www.youtube.com/watch?v=4PBW6ZdgE7g",
            top: 66.5,
            left: 52,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "丹後王国食のみやこ",
            address: "京都府京丹後市弥栄町鳥取123",
            url: "https://www.youtube.com/watch?v=C9w0rFW1h4U",
            top: 16.0,
            left: 23,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "美山<br>ふれあい広場",
            address: "京都府南丹市美山町安掛下23-2",
            url: "https://www.youtube.com/watch?v=coToo8VB8RM",
            top: 51.0,
            left: 60,
            labelDx: 25,
            labelDy: 0,
          },
          {
            name: "ウッディー<br>京北",
            address: "京都府京都市右京区京北周山町上寺田1-1",
            url: "https://www.youtube.com/watch?v=ToHmcPqVQF0",
            top: 62.0,
            left: 62.5,
            labelDx: 20,
            labelDy: 5,
          },
          {
            name: "くみはまSANKAIKAN",
            address: "京都府京丹後市久美浜町浦明1709",
            url: "https://www.youtube.com/watch?v=2tNappKbHhQ",
            top: 22.0,
            left: 14,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "スプリングス<br>ひよし",
            address: "京都府南丹市日吉町中宮ノ向8",
            url: "https://www.youtube.com/watch?v=tke-6u1LI4E",
            top: 61.0,
            left: 55,
            labelDx: 17,
            labelDy: 0,
          },
          {
            name: "お茶の京都<br>みなみやましろ村",
            address: "京都府相楽郡南山城村大字北大河原小字殿田102",
            url: "https://www.youtube.com/watch?v=Slj205tmC2g",
            top: 92.0,
            left: 91,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "京丹波<br> 味夢の里",
            address: "京都府船井郡京丹波町曽根深シノ65-1",
            url: "https://www.youtube.com/watch?v=pSMHuMtAsK4",
            top: 60.0,
            left: 45,
            labelDx: -10,
            labelDy: 0,
          },
          {
            name: "末山・くつわ池自然公園<br> キャンプ場(有料）",
            address: "京都府綴喜郡宇治田原町大字郷之口小字末山3",
            url: "https://www.youtube.com/watch?v=s6ydO16GeFk",
            top: 85.0,
            left: 79,
            labelDx: 20,
            labelDy: 0,
          },
        ],
        "kinki-nara.jpg": [
          {
            name: "吉野路 大塔",
            address: "奈良県五條市大塔町阪本454",
            url: "https://www.youtube.com/watch?v=mGh0jNSMxs4",
            top: 61,
            left: 40.5,
            labelDx: -25,
            labelDy: 0,
          },
          {
            name: "杉の湯 川上",
            address: "奈良県吉野郡川上村大字迫695",
            url: "https://www.youtube.com/watch?v=1te1yvq9-Ck",
            top: 50,
            left: 60,
            labelDx: 20,
            labelDy: 0,
          },
          {
            name: "吉野路 黒滝",
            address: "奈良県吉野郡黒滝村大字長瀬22",
            url: "https://www.youtube.com/watch?v=ZQ9xKzrbQbw",
            top: 52,
            left: 49,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "ふたかみ<br>パーク當麻",
            address: "奈良県葛城市新在家402-1",
            url: "https://www.youtube.com/watch?v=U0lbgurhbYE",
            top: 31,
            left: 37,
            labelDx: -20,
            labelDy: -5,
          },
          {
            name: "宇陀路大宇陀",
            address: "奈良県宇陀市大宇陀拾生714-1",
            url: "https://www.youtube.com/watch?v=UujLae8dBio",
            top: 36,
            left: 58,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "十津川郷",
            address: "奈良県吉野郡十津川村大字小原225-1",
            url: "https://www.youtube.com/watch?v=3up-6y6YVig",
            top: 85,
            left: 45,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "宇陀路室生",
            address: "奈良県宇陀市室生三本松1638-1",
            url: "https://www.youtube.com/watch?v=ncKvhcwBH1U",
            top: 26,
            left: 65,
            labelDx: 15,
            labelDy: 0,
          },
          {
            name: "針テラス",
            address: "奈良県奈良市針町345",
            url: "https://www.youtube.com/watch?v=U5hJIcld5MQ",
            top: 22,
            left: 60,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "大和路へぐり",
            address: "奈良県生駒郡平群町大字笈瀬21-1",
            url: "https://www.youtube.com/watch?v=9VN73yS7FxI",
            top: 20,
            left: 38,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "吉野路<br>大淀iセンター",
            address: "奈良県吉野郡大淀町大字芦原536-1",
            url: "https://www.youtube.com/watch?v=42NXpLy8ICk",
            top: 44,
            left: 46,
            labelDx: 0,
            labelDy: 5,
          },
          {
            name: "伊勢本街道 御杖",
            address: "奈良県宇陀郡御杖村大字神末6330",
            url: "https://www.youtube.com/watch?v=3Ie8gAJRccs",
            top: 31,
            left: 79,
            labelDx: 15,
            labelDy: 0,
          },
          {
            name: "かつらぎ",
            address: "奈良県葛城市太田1257",
            url: "https://www.youtube.com/watch?v=DOuhwer3s6A",
            top: 35,
            left: 38,
            labelDx: -30,
            labelDy: 10,
          },
          {
            name: "レスティ<br>唐古・鍵",
            address: "奈良県磯城郡田原本町大字唐古70-1",
            url: "https://www.youtube.com/watch?v=6f3GpFOSrWU",
            top: 28,
            left: 45,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "飛鳥",
            address: "奈良県高市郡明日香村大字越1139",
            url: "https://www.youtube.com/watch?v=z8MGCW6gf3E",
            top: 36.5,
            left: 45,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "なら歴史<br>芸術文化村",
            address: "奈良県天理市杣之内町437-3",
            url: "https://www.youtube.com/watch?v=2jKv3r5ExBA",
            top: 25,
            left: 51,
            labelDx: 10,
            labelDy: 0,
          },
          {
            name: "吉野路上北山",
            address: "奈良県吉野郡上北山村大字河合1-1",
            url: "https://www.youtube.com/watch?v=707kJl9Fl_A",
            top: 69,
            left: 63,
            labelDx: -10,
            labelDy: 0,
          },
        ],
        "kinki-mie.jpg": [
          {
            name: "飯高駅",
            address: "三重県松阪市飯高町宮前177",
            url: "https://www.youtube.com/watch?v=CmH0R1-PIjw",
            top: 55,
            left: 49.0,
            labelDx: -10,
            labelDy: -1,
          },
          {
            name: "菰野",
            address: "三重県三重郡菰野町大字菰野2256",
            url: "https://www.youtube.com/watch?v=HHbl_u4uTOY",
            top: 15.0,
            left: 59,
            labelDx: 0,
            labelDy: -15,
          },
          {
            name: "紀宝町<br>ウミガメ公園",
            address: "三重県南牟婁郡紀宝町井田568-7",
            url: "https://www.youtube.com/watch?v=QW3bFWf7ZUc",
            top: 98.0,
            left: 33.5,
            labelDx: 10,
            labelDy: 0,
          },
          {
            name: "パーク七里御浜",
            address: "三重県南牟婁郡御浜町大字阿田和4926-5",
            url: "https://www.youtube.com/watch?v=Mm-JJtN7odg",
            top: 94,
            left: 36.0,
            labelDx: 10,
            labelDy: -5,
          },
          {
            name: "海山",
            address: "三重県北牟婁郡紀北町海山区相賀1439-3",
            url: "https://www.youtube.com/watch?v=RkOWPGdZtBo",
            top: 75.5,
            left: 44.5,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "奥伊勢木つつ木館",
            address: "三重県度会郡大紀町滝原870-37",
            url: "https://www.youtube.com/watch?v=cZ2W3pvowCQ",
            top: 59.5,
            left: 52.5,
            labelDx: 0,
            labelDy: 0,
          },
          {
            name: "熊野<br>きのくに",
            address: "三重県熊野市飛鳥町大又109-21",
            url: "https://www.youtube.com/watch?v=81BkPlRjIFo",
            top: 83,
            left: 39.5,
            labelDx: 10,
            labelDy: -1,
          },
          {
            name: "茶倉駅",
            address: "三重県松阪市飯南町粥見452-1",
            url: "https://www.youtube.com/watch?v=wPWc4X263xg",
            top: 49.0,
            left: 53.5,
            labelDx: 0,
            labelDy: -1,
          },
          {
            name: "奥伊勢おおだい",
            address: "三重県多気郡大台町大字佐原663-1",
            url: "https://www.youtube.com/watch?v=b48-07xMkDY",
            top: 54.5,
            left: 52.5,
            labelDx: 20,
            labelDy: -1,
          },
          {
            name: "美杉",
            address: "三重県津市美杉町上多気267",
            url: "https://www.youtube.com/watch?v=P38-HM7BKvA",
            top: 47.5,
            left: 46.5,
            labelDx: 0,
            labelDy: -1,
          },
          {
            name: "関宿",
            address: "三重県亀山市関町新所674-8",
            url: "https://www.youtube.com/watch?v=Q1wuXA_o5YU",
            top: 28.5,
            left: 56.5,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "紀伊長島マンボウ",
            address: "三重県北牟婁郡紀北町東長島2410-73",
            url: "https://www.youtube.com/watch?v=dHeIsfOTZyk",
            top: 69.5,
            left: 48.5,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "あやま",
            address: "三重県伊賀市川合3370-29",
            url: "https://www.youtube.com/watch?v=QsvWzC8JKw8",
            top: 28.5,
            left: 41.0,
            labelDx: -10,
            labelDy: -5,
          },
          {
            name: "いが",
            address: "三重県伊賀市柘植町6187-1",
            url: "https://www.youtube.com/watch?v=aWq-94_qej0",
            top: 28,
            left: 44,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "津かわげ",
            address: "三重県津市河芸町三行255-4",
            url: "https://www.youtube.com/watch?v=k3A4o_srPiY",
            top: 31,
            left: 59.5,
            labelDx: 10,
            labelDy: -5,
          },
          {
            name: "熊野・花の窟",
            address: "三重県熊野市有馬町137",
            url: "https://www.youtube.com/watch?v=Ap4HpQLay-0",
            top: 88.5,
            left: 38.5,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "熊野・板屋九郎兵衛の里",
            address: "三重県熊野市紀和町板屋82",
            url: "https://www.youtube.com/watch?v=FM6WrGCLNs8",
            top: 91,
            left: 26.5,
            labelDx: 0,
            labelDy: -5,
          },
          {
            name: "小舟キャンプ場",
            address: "三重県熊野市紀和町小船",
            url: "https://www.youtube.com/watch?v=SK6L5xMcA6k",
            top: 95.0,
            left: 25.5,
            labelDx: 0,
            labelDy: 0,
          },
        ],
      };

      async function init() {
        // 地域ナビゲーションを生成
        generateRegionNav();
        setupScrollCancel(); // スクロールキャンセルイベントのセットアップ

        const main = document.getElementById("mainContent");

        for (const [rIdx, region] of regions.entries()) {
          const regionSec = document.createElement("section");
          regionSec.id = region.id;
          regionSec.innerHTML = `<h2 class="region-header">${region.name}地方</h2>`;

          for (const [pIdx, pref] of region.prefs.entries()) {
            const prefSec = document.createElement("div");
            prefSec.className = "flex flex-col items-center my-10";

            const h2 = document.createElement("h2");
            h2.className = "main-title";
            h2.innerText = `${pref.name}の「道の駅」`;
            prefSec.appendChild(h2);

            const mapCont = document.createElement("div");
            mapCont.className = "map-container";
            const img = document.createElement("img");
            img.src = baseUrl + pref.file;
            img.alt = `${pref.name}地図`;
            img.className = "map-image";

            await new Promise((resolve) => {
              img.onload = resolve;
              img.onerror = resolve;
            });
            mapCont.appendChild(img);

            const stations = allStationData[pref.file] || [];
            stations.forEach((st) => {
              mapCont.appendChild(createPin(st));
            });
            prefSec.appendChild(mapCont);

            const isLastOfAll =
              rIdx === regions.length - 1 && pIdx === region.prefs.length - 1;
            prefSec.appendChild(createNavButtons(rIdx, isLastOfAll));

            regionSec.appendChild(prefSec);
          }
          main.appendChild(regionSec);

          // ★追加: セクションがDOMに追加された直後に、待機中の移動先と一致するかチェック
          if (pendingTargetId === region.id) {
            // 少し待ってから実行（ブラウザの描画安定化のため）
            setTimeout(() => {
              const target = document.getElementById(region.id);
              if (target) {
                target.scrollIntoView({ behavior: "smooth" });
                clearPendingState(); // 移動したのでメモリをリセット
              }
            }, 100);
          }
        }
      }

      // ユーザーの操作でメモリ状態をキャンセルする設定
      function setupScrollCancel() {
        const cancelEvents = ["wheel", "touchmove", "mousedown", "keydown"];
        const cancelHandler = () => {
          if (pendingTargetId) {
            clearPendingState();
          }
        };

        cancelEvents.forEach((evt) => {
          window.addEventListener(evt, cancelHandler, { passive: true });
        });
      }

      // 地域ナビゲーションの動的生成（カードタイプへの変更）
      function generateRegionNav() {
        const container = document.getElementById("regionNavContainer");
        container.innerHTML = "";

        regions.forEach((region) => {
          let stationCount = 0;
          region.prefs.forEach((pref) => {
            if (allStationData[pref.file]) {
              stationCount += allStationData[pref.file].length;
            }
          });

          // リンクをカードとして生成
          const link = document.createElement("a");
          link.href = `#${region.id}`;
          link.className = "jump-card";

          link.innerHTML = `
            <div class="region-name">${region.name} <i class="fas fa-chevron-down text-[10px] text-gray-400"></i></div>
            <div class="station-count">(${stationCount}駅)</div>
          `;

          // ★修正: クリックイベントをハンドリングしてメモリ制御
          link.onclick = (e) => {
            e.preventDefault(); // デフォルトの移動をキャンセルしJSで制御

            // 既に他のメモリがあれば消す
            if (pendingTargetId && pendingTargetId !== region.id) {
              clearPendingState();
            }

            // 新しいターゲットをメモリする（色を変える）
            pendingTargetId = region.id;
            pendingNavButton = link;
            link.classList.add("pending");

            // ターゲットが既に存在するか確認
            const target = document.getElementById(region.id);

            if (target) {
              // 既に存在する場合は移動を開始
              target.scrollIntoView({ behavior: "smooth" });

              // 移動開始したのでメモリは解除するが、
              // 「移動するまで濃い黄色」という要望のため、少し遅延させて解除する
              // （スムーズスクロール中は本来イベントを取るべきだが、簡易的に遅延で対応）
              setTimeout(() => {
                clearPendingState();
              }, 1000);
            }
            // 存在しない場合は、そのままpending状態で待機（init関数内で処理される）
          };

          container.appendChild(link);
        });
      }

      // 保留状態をクリアする関数
      function clearPendingState() {
        if (pendingNavButton) {
          pendingNavButton.classList.remove("pending");
        }
        pendingTargetId = null;
        pendingNavButton = null;
      }

      // 地図下の移動ボタン生成
      function createNavButtons(rIdx, isLastOfAll) {
        const nav = document.createElement("div");
        nav.className = "flex justify-between w-full mt-2 px-1";

        const nextRegion = regions[rIdx + 1];

        const leftDiv = document.createElement("div");
        leftDiv.innerHTML = `<a href="#pageTop" class="nav-btn"><i class="fas fa-home"></i> TOPへ</a>`;
        nav.appendChild(leftDiv);

        const rightDiv = document.createElement("div");
        rightDiv.className = "flex gap-2";

        if (nextRegion) {
          rightDiv.innerHTML += `<a href="#${nextRegion.id}" class="nav-btn">次の地方へ <i class="fas fa-chevron-down"></i></a>`;
        }

        nav.appendChild(rightDiv);

        return nav;
      }

      function createPin(st) {
        const wrapper = document.createElement("div");
        wrapper.className = "pin-wrapper";
        wrapper.style.top = st.top + "%";
        wrapper.style.left = st.left + "%";

        const label = document.createElement("div");
        label.className = "pin-label";
        const dx = st.labelDx || 0;
        const dy = st.labelDy || 0;
        label.style.transform = `translate(${dx}px, ${dy}px)`;
        label.innerHTML = st.name;

        const link = document.createElement("a");
        link.href = st.url;
        link.target = "_blank";
        link.className = "pin-link";
        link.innerHTML = `<i class="fas fa-map-marker-alt pin-icon"></i>`;

        wrapper.appendChild(label);
        wrapper.appendChild(link);
        return wrapper;
      }

      window.onload = init;
    </script>
  </body>
</html>
